(function(){"use strict";var e={51:function(e,t,i){var s=i(942),n=i(128);i(702);const r={id:"app"};function a(e,t,i,n,a,o){const l=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)("div",r,[(0,s.Wm)(l)])}var o={name:"app"},l=i(744);const c=(0,l.Z)(o,[["render",a]]);var u=c,d=i(201);const m={class:"container"},p={class:"row"};function g(e,t,i,n,r,a){const o=(0,s.up)("McSidebar"),l=(0,s.up)("McResultView");return(0,s.wg)(),(0,s.iD)("div",m,[(0,s._)("div",p,[(0,s.Wm)(o,{onRunSearch:a.updateQuery,results:n.results},null,8,["onRunSearch","results"]),(0,s.Wm)(l,{item:n.selectedItem},null,8,["item"])])])}const h={class:"col-md-3 mb-4"},f=(0,s._)("h4",null,"Search",-1),w={class:"form-group mb-3",id:"search_form"},v={class:"input-group"},b=(0,s._)("span",{class:"input-group-text"},[(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},[(0,s._)("path",{d:"M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7C401.8 87.79 326.8 13.32 235.2 1.723C99.01-15.51-15.51 99.01 1.724 235.2c11.6 91.64 86.08 166.7 177.6 178.9c53.8 7.189 104.3-6.236 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 0C515.9 484.7 515.9 459.3 500.3 443.7zM79.1 208c0-70.58 57.42-128 128-128s128 57.42 128 128c0 70.58-57.42 128-128 128S79.1 278.6 79.1 208z"})])],-1),y=(0,s._)("h4",null,"Results",-1),_={class:"list-group",id:"search_results"};function I(e,t,i,n,r,a){const o=(0,s.up)("McItem");return(0,s.wg)(),(0,s.iD)("div",h,[f,(0,s._)("div",w,[(0,s._)("div",v,[b,(0,s.wy)((0,s._)("input",{type:"search",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>r.mutableQuery=e),onInput:t[1]||(t[1]=(...e)=>a.runSearch&&a.runSearch(...e)),placeholder:"Search"},null,544),[[s.nr,r.mutableQuery]])])]),y,(0,s._)("div",_,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.results,(e=>((0,s.wg)(),(0,s.j4)(o,{key:e.id,items:[e],"show-name":!0,class:"list-group-item"},null,8,["items"])))),128))])])}var k=i(279),j=i.n(k),x=i(520);x.ZP.delete("minecraft");const D=new x.ZP("minecraft");D.version(1).stores({items:"++id, &name, displayName, texture",recipes:"++id, *ingredients, *result.id, type, inShape, base, addition, result"}),D.open(),D.on("ready",(e=>{e.items.count((t=>{if(t>0)console.log("Already populated");else{console.log("Database is empty. Populating from ajax call...");const t=new Promise(((e,t)=>{$.ajax("/minecraft-item-browser/js/items.json",{type:"get",dataType:"json",error:function(e,i){t(i)},success:function(t){e(t)}})})),i=new Promise(((e,t)=>{$.ajax("/minecraft-item-browser/js/recipes.json",{type:"get",dataType:"json",error:(e,i)=>{t(i)},success:t=>{e(t)}})})),s=Ie.currentRoute.value;new Promise.all([t,i]).then((t=>(console.log("Got ajax response. Adding objects.",t),console.log("Calling bulkAdd() to insert objects..."),new Promise.all([e.items.bulkAdd(t[0]),e.recipes.bulkAdd(t[1])])))).then((()=>(console.log("Done populating."),e.items.get({name:s.params.item_name})))).then((e=>{const t=s.matched[0].instances.default;t.setSelectedItem(e)}))}}))}));var S=D;const O=["data-visible-item"],H={key:0,class:"text-muted"};function M(e,t,i,n,r,a){const o=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("span",{class:(0,s.C_)(i.showName?"":"invslot"),"data-visible-item":r.visibleItemIndex},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.items,(e=>((0,s.wg)(),(0,s.j4)(o,{key:e.id,to:{name:"Home",params:{item_name:e.name}},class:"item-link","data-item-id":e.id,"data-bs-toggle":i.showName?null:"tooltip","data-bs-title":a.visibleName(e),title:a.visibleName(e)},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.textures,((t,i)=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:(0,s.C_)(`mc-block texture-${t}`),style:(0,s.j5)(a.textureStyles(e,i))},null,6)))),128)),i.showName?((0,s.wg)(),(0,s.iD)("span",H,(0,s.zw)(a.visibleName(e)),1)):(0,s.kq)("",!0)]),void 0,!0),_:2},1032,["to","data-item-id","data-bs-toggle","data-bs-title","title"])))),128))],10,O)}var N={props:{items:{type:Object,required:!0},showName:{type:Boolean,default:!1}},data(){return{interval:null,visibleItemIndex:0}},mounted(){this.items&&this.items.length>1&&(this.interval=setInterval((()=>{this.visibleItemIndex+=1,this.visibleItemIndex>=this.items.length&&(this.visibleItemIndex=0)}),1e3))},beforeUnmount(){this.interval&&clearInterval(this.interval)},methods:{visibleName:function(e){return e.displayName?e.displayName:e.name},textureStyles:function(e,t){const i={};return e.tint&&e.tint[t]&&(i.backgroundColor="rgba("+e.tint[t].join(",")+")"),i}}};const A=(0,l.Z)(N,[["render",M]]);var q=A,C={props:{results:Array},components:{McItem:q},created(){if(this.$route.params.item_name){let e=this;S.items.get({name:this.$route.params.item_name}).then((t=>{e.mutableQuery=t?t.displayName:e.$route.params.item_name,e.$emit("runSearch",e.mutableQuery)}))}},data(){return{mutableQuery:""}},computed:{runSearch(){return j()((function(e){this.$emit("runSearch",e.srcElement.value)}),50).bind(this)}}};const P=(0,l.Z)(C,[["render",I]]);var R=P;const T={key:0,class:"col-md-9"},Z={class:"mb-5"},K={key:0,class:"mb-4"},Y=(0,s._)("h2",null,"Created By",-1),z={class:"row"},Q={key:1,class:"mb-4"},B=(0,s._)("h2",null,"Used In",-1),F={class:"row"},W={key:2,class:"mb-4"},G=(0,s._)("h2",null,"Creates",-1),E={class:"row"},U={key:1,class:"col-md-9"},V=(0,s._)("p",null,"Do a search and select an item.",-1),L=[V];function J(e,t,i,n,r,a){const o=(0,s.up)("McRecipe");return i.item?((0,s.wg)(),(0,s.iD)("div",T,[(0,s._)("h1",Z,(0,s.zw)(i.item.displayName),1),r.created_by.length?((0,s.wg)(),(0,s.iD)("div",K,[Y,(0,s._)("div",z,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.created_by,(e=>((0,s.wg)(),(0,s.j4)(o,{key:e.id,recipe:e,suggestedInput:i.item,showFooter:""},null,8,["recipe","suggestedInput"])))),128))])])):(0,s.kq)("",!0),r.used_in.length?((0,s.wg)(),(0,s.iD)("div",Q,[B,(0,s._)("div",F,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.used_in,(e=>((0,s.wg)(),(0,s.j4)(o,{key:e.id,recipe:e,suggestedInput:i.item,showHeader:"",showFooter:""},null,8,["recipe","suggestedInput"])))),128))])])):(0,s.kq)("",!0),r.creates.length?((0,s.wg)(),(0,s.iD)("div",W,[G,(0,s._)("div",E,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.creates,(e=>((0,s.wg)(),(0,s.j4)(o,{key:e.id,recipe:e,suggestedInput:i.item,showHeader:"",showFooter:""},null,8,["recipe","suggestedInput"])))),128))])])):(0,s.kq)("",!0)])):((0,s.wg)(),(0,s.iD)("div",U,L))}const X={key:0,class:"col-6 col-xl-4 mb-3"},ee={class:"card recipe"},te={key:0,class:"card-header"},ie={class:"mb-0"},se={class:"card-body d-flex"},ne={key:0,class:"input-recipe"},re=(0,s._)("svg",{class:"chevron-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},[(0,s._)("path",{d:"M96 480c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L242.8 256L73.38 86.63c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l192 192c12.5 12.5 12.5 32.75 0 45.25l-192 192C112.4 476.9 104.2 480 96 480z"})],-1),ae={class:"result"},oe={key:0,class:"count"},le={key:1,class:"card-footer"};function ce(e,t,i,n,r,a){const o=(0,s.up)("McItem");return a.isReady?((0,s.wg)(),(0,s.iD)("div",X,[(0,s._)("div",ee,[i.showHeader?((0,s.wg)(),(0,s.iD)("div",te,[(0,s._)("h4",ie,(0,s.zw)(r.createsItem.displayName),1)])):(0,s.kq)("",!0),(0,s._)("div",se,[a.inputGrid?((0,s.wg)(),(0,s.iD)("div",ne,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.inputGrid,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,((e,t)=>((0,s.wg)(),(0,s.iD)("span",{key:t},[(0,s.Wm)(o,{items:a.getIngredientItems(e)},null,8,["items"])])))),128))])))),128))])):(0,s.kq)("",!0),re,(0,s._)("span",ae,[(0,s.Wm)(o,{items:[r.createsItem]},null,8,["items"]),i.recipe.result.count>1?((0,s.wg)(),(0,s.iD)("span",oe,(0,s.zw)(i.recipe.result.count),1)):(0,s.kq)("",!0)])]),i.showFooter?((0,s.wg)(),(0,s.iD)("div",le,[(0,s.Wm)(o,{items:[this.craftingTableItem],"show-name":!0},null,8,["items"])])):(0,s.kq)("",!0)])])):(0,s.kq)("",!0)}var ue={props:{recipe:Object,showHeader:{type:Boolean,default:!1},showFooter:{type:Boolean,default:!1},suggestedInput:{type:Object,default:void 0}},components:{McItem:q},data(){return{createsItem:void 0,loadedIngredients:void 0,craftingTableItem:void 0}},computed:{isReady(){return void 0!=this.createsItem&&void 0!=this.loadedIngredients&&void 0!=this.craftingTableItem},inputGrid(){let e=[[]];if("crafting_shaped"===this.recipe.type||"crafting_shapeless"===this.recipe.type){e=[[],[],[]];for(var t=0;t<9;t++){let i=Math.floor(t/3),s=t%3;this.recipe.inShape?this.recipe.inShape[i]?e[i][s]=this.recipe.inShape[i][s]:e[i][s]=null:this.recipe.ingredients&&(e[i][s]=this.recipe.ingredients[t])}}else"smelting"===this.recipe.type||"blasting"===this.recipe.type||"smoking"===this.recipe.type||"campfire_cooking"===this.recipe.type||"stonecutting"===this.recipe.type?(e=[[]],this.suggestedInput&&-1!==this.recipe.ingredients.indexOf(this.suggestedInput.id)?e[0][0]=this.suggestedInput.id:e[0][0]=this.recipe.ingredients[0]):("smithing"==this.recipe.type||"brewing"==this.recipe.type)&&(e=[[this.recipe.base,this.recipe.addition]]);return e}},methods:{getIngredientItems(e){return e=Array.isArray(e)?e:[e],this.loadedIngredients.filter((t=>e.includes(t.id)))}},created(){const e={crafting_shapeless:"crafting_table",crafting_shaped:"crafting_table",smelting:"furnace",stonecutting:"stonecutter",smithing:"smithing_table",blasting:"blast_furnace",smoking:"smoker",campfire_cooking:"campfire",brewing:"brewing_stand"};S.items.get({name:e[this.recipe.type]}).then((e=>{this.craftingTableItem=e})),S.items.get(this.recipe.result.id).then((e=>{this.createsItem=e})),S.items.bulkGet(this.recipe.ingredients.flat()).then((e=>{this.loadedIngredients=e}))}};const de=(0,l.Z)(ue,[["render",ce]]);var me=de,pe={props:{item:Object},components:{McRecipe:me},data(){return{created_by:[],used_in:[],creates:[]}},watch:{item:function(e){const t={crafting_table:["crafting_shapeless","crafting_shaped"],furnace:["smelting"],stonecutter:["stonecutting"],smithing_table:["smithing"],blast_furnace:["blasting"],smoker:["smoking"],campfire:["campfire_cooking"],brewing_stand:["brewing"]};let i=this;S.recipes.where("result.id").equals(e.id).toArray().then((function(e){i.created_by=e})),S.recipes.where("ingredients").equals(e.id).toArray().then((function(e){i.used_in=e})),t[e.name]?S.recipes.where("type").anyOf(t[e.name]).toArray().then((function(e){i.creates=e})):this.creates=[]}}};const ge=(0,l.Z)(pe,[["render",J]]);var he=ge,fe=i(877),we=i(204),ve={components:{McSidebar:R,McResultView:he},setup(){const e=(0,s.iH)(void 0),t=(0,s.iH)([]);return{selectedItem:e,results:t}},methods:{setSelectedItem(e){this.selectedItem=e},updateQuery(e){if(e.length){let t=this,i=new RegExp((0,we.Z)(e),"i");S.items.filter((e=>i.test(e.displayName))).limit(20).toArray().then((function(e){t.results=e}))}else this.results=[]}},mounted(){this.tooltipHandler=new fe.u(this.$el,{selector:"[data-bs-toggle=tooltip]",offset:[0,24]})},watch:{"$route.params":{immediate:!0,handler(e){this.tooltipHandler&&document.querySelectorAll("body > div.tooltip").forEach((e=>{e.remove()})),e.item_name&&S.items.get({name:e.item_name}).then((e=>{e&&this.setSelectedItem(e)}))}}}};const be=(0,l.Z)(ve,[["render",g]]);var ye=be;const _e=(0,d.p7)({history:(0,d.r5)(),routes:[{path:"/:item_name?",name:"Home",component:ye,props:!0}]});var Ie=_e;window.$=i(755);const ke=(0,s.ri)(u);ke.use(Ie),ke.use(n.ZP,{config:{id:"UA-527778-21"}},Ie),ke.mount("#app")}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,i),r.exports}i.m=e,function(){var e=[];i.O=function(t,s,n,r){if(!s){var a=1/0;for(u=0;u<e.length;u++){s=e[u][0],n=e[u][1],r=e[u][2];for(var o=!0,l=0;l<s.length;l++)(!1&r||a>=r)&&Object.keys(i.O).every((function(e){return i.O[e](s[l])}))?s.splice(l--,1):(o=!1,r<a&&(a=r));if(o){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[s,n,r]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={826:0};i.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,r,a=s[0],o=s[1],l=s[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(n in o)i.o(o,n)&&(i.m[n]=o[n]);if(l)var u=l(i)}for(t&&t(s);c<a.length;c++)r=a[c],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(u)},s=self["webpackChunkminecraft_browser"]=self["webpackChunkminecraft_browser"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(51)}));s=i.O(s)})();
//# sourceMappingURL=index.c95f349f.js.map